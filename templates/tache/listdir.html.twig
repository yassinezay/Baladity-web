{% extends 'base-front.html.twig' %}
{% block title %}Liste des Tâches{% endblock %}
{% block barreTitre %}
{% if 'Citoyen' in user.getTypeUser() %}
<li><a href="{{ path('app_main_front') }}" >Home</a></li>
					 <li class="dropdown"><a href="#"><span>Actualité</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('app_actualite') }}">Afficher Actualité</a></li>
							<li><a href="{{ path('app_publicite') }}">Afficher Publicité</a></li>
							<li><a href="{{ path('ajouterPub') }}">Ajouter Publicité</a></li>
						</ul>
					</li>
					 <li class="dropdown"><a href="#"><span>Reclamation</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('typeReclamationF') }}">Ajouter Réclamation</a></li>
							<li><a href="{{ path('afficherReclamationF') }}">Mes réclamations</a></li>
						</ul>
					</li>
                    <li class="dropdown"><a href="#"><span>Evénement</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('evenement_listCitoyen') }}">liste des Evenements</a></li>
							<li><a href="{{ path('ajouter_voteFront') }}">Ajouter proposition</a></li>
						</ul>
					</li>
					<li><a href="{{ path('chatgpt') }}">ChatGpt</a></li>
					<li><a href="contact.html">Contact</a></li>
                    <li><a href="contact.html">About Us</a></li>
					<li class="dropdown"><a href="#"><span>Profile</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('app_profile_fron') }}">Profile</a></li>
							<li><a href="{{ path('sign_out') }}">Logout</a></li>
						</ul>
					</li>
{% elseif 'Responsable employé' in user.getTypeUser() %}
<li><a href="{{ path('app_main_front') }}" >Home</a></li>
					<li class="dropdown"><a href="#"><span>Actualité</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('app_actualiteshowResponsable') }}">Afficher Actualité</a></li>
							<li><a href="{{ path('ajouterA2') }}">Ajouter Actualité</a></li>
						</ul>
					</li>
					 <li class="dropdown"><a href="#" ><span>Reclamation</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('typeReclamationF') }}">Ajouter Réclamation</a></li>
							<li><a href="{{ path('afficherReclamationF') }}">Mes réclamations</a></li>
						</ul>
					</li>
					 <li class="dropdown"><a href="#" ><span>Evenement</span> <i
						class="bi bi-chevron-down dropdown-indicator" class="active"></i></a>
						<ul>
							<li><a href="{{ path('evenement_listFront') }}">Liste des evenements</a></li>
							<li><a href="{{ path('ajouterFront_evenement') }}">Ajouter un evenement</a></li>
							<li><a href="{{ path('calendar') }}">Calendrier des evenements</a></li>
							<li><a href="{{ path('ajouter_voteFront') }}">Ajouter une proposition</a></li>
							<li><a href="{{ path('statsF') }}">Statistiques des evenements</a></li>


						</ul>
					</li>
					<li><a href="{{ path('equipement_show_responsable') }}">Equipement</a></li>
					<li><a href="{{ path('tache_listfront') }} " class="active">Taches</a></li>
					<li><a href="{{ path('chatgpt') }}">ChatGpt</a></li>
					 <li class="dropdown"><a href="#"><span>Profile</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('app_profile_fron') }}">Profile</a></li>
							<li><a href="{{ path('sign_out') }}">Logout</a></li>
						</ul>
					</li>
{% elseif 'Employé' in user.getTypeUser() %}
<li><a href="{{ path('app_main_front') }}">Home</a></li>
					 <li class="dropdown"><a href="#"><span>Actualité</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('app_actualite') }}">Afficher Actualité</a></li>
							<li><a href="{{ path('app_publicite') }}">Afficher Publicité</a></li>
							<li><a href="{{ path('ajouterPub') }}">Ajouter Publicité</a></li>
						</ul>
					</li>
					 <li class="dropdown"><a href="#"><span>Reclamation</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('typeReclamationF') }}">Ajouter Réclamation</a></li>
							<li><a href="{{ path('afficherReclamationF') }}">Mes réclamations</a></li>
						</ul>
					</li>
					  <li class="dropdown"><a href="#"><span>Evénement</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('evenement_listCitoyen') }}">liste des Evenements</a></li>
							<li><a href="{{ path('ajouter_voteFront') }}">Ajouter proposition</a></li>
						</ul>
					</li>
					<li><a href="{{ path('equipement_show_front') }}">Equipement</a></li>
					<li><a href="{{ path('tache_listfront') }}" class="active">Taches</a></li>
					<li><a href="{{ path('chatgpt') }}">ChatGpt</a></li>
					<li class="dropdown"><a href="#"><span>Profile</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('app_profile_fron') }}">Profile</a></li>
							<li><a href="{{ path('sign_out') }}">Logout</a></li>
						</ul>
					</li>

{% elseif 'Directeur' in user.getTypeUser() %}
<li><a href="{{ path('app_main_front') }}" >Home</a></li>
					<li class="dropdown"><a href="#"><span>Actualité</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('app_actualiteshowResponsable') }}">Afficher Actualité</a></li>
							<li><a href="{{ path('ajouterA2') }}">Ajouter Actualité</a></li>
						</ul>
					</li>
					 <li class="dropdown"><a href="#"><span>Reclamation</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('afficherReclamationFA') }}">les Réclamations</a></li>
							<li><a href="{{ path('statsReclamationF') }}">Statistiques des Réclamations</a></li>
							<li><a href="{{ path('chatbot') }}">Chat for help</a></li>
						</ul>
					</li>
					<li class="dropdown"><a href="#"><span>Evenement</span> <i
						class="bi bi-chevron-down dropdown-indicator" class="active"></i></a>
						<ul>
							<li><a href="{{ path('evenement_listFront') }}">Liste des evenements</a></li>
							<li><a href="{{ path('ajouterFront_evenement') }}">Ajouter un evenement</a></li>
							<li><a href="{{ path('calendar') }}">Calendrier des evenements</a></li>
							<li><a href="{{ path('ajouter_voteFront') }}">Ajouter une proposition</a></li>
							<li><a href="{{ path('statsF') }}">Statistiques des evenements</a></li>

						</ul>
					</li>
					<li><a href="{{ path('equipement_show_responsable') }}">Equipement</a></li>
					<li><a href="{{ path('tache_listdir') }}" class="active">Taches</a></li>
					<li><a href="{{ path('chatgpt') }}">ChatGpt</a></li>
					<li class="dropdown"><a href="#"><span>Profile</span> <i
						class="bi bi-chevron-down dropdown-indicator" class=""></i></a>
						<ul>
							<li><a href="{{ path('app_profile_fron') }}">Profile</a></li>
							<li><a href="{{ path('sign_out') }}">Logout</a></li>
						</ul>
					</li>

{% endif %}

					
{% endblock %}

{% block body %}  

<!-- Counter Cards -->
<div class="row">
   <!-- Tache Done Card -->
   <div class="col-xxl-4 col-md-6">
      <div class="card info-card sales-card">
         <!-- Filter dropdown -->
         <div class="filter">
            <!-- Your filter dropdown code -->
         </div>
         <div class="card-body">
            <h5 class="card-title">Tache Done <span>| Total</span></h5>
            <div class="d-flex align-items-center">
               <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <i class="bi bi-clipboard-check fs-2"></i>
               </div>
               <div class="ps-3">
                  <h6><strong>{{ tasksDoneCount }}</strong></h6>
                  <!-- Additional stats if needed -->
               </div>
            </div>
         </div>
      </div>
   </div>
   <!-- Tache Doing Card -->
   <div class="col-xxl-4 col-md-6">
      <div class="card info-card revenue-card">
         <!-- Filter dropdown -->
         <div class="filter">
            <!-- Your filter dropdown code -->
         </div>
         <div class="card-body">
            <h5 class="card-title">Tache Doing <span>| Total</span></h5>
            <div class="d-flex align-items-center">
               <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <i class="bi bi-gear-wide-connected fs-2"></i>
               </div>
               <div class="ps-3">
                  <h6><strong>{{ tasksDoingCount }}</strong></h6>
                  <!-- Additional stats if needed -->
               </div>
            </div>
         </div>
      </div>
   </div>
   <!-- Tache To Do Card -->
   <div class="col-xxl-4 col-md-6">
      <div class="card info-card customers-card">
         <!-- Filter dropdown -->
         <div class="filter">
            <!-- Your filter dropdown code -->
         </div>
         <div class="card-body">
            <h5 class="card-title">Tache To Do <span>| Total</span></h5>
            <div class="d-flex align-items-center">
               <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <i class="bi bi-card-checklist fs-2"></i>
               </div>
               <div class="ps-3">
                  <h6><strong>{{ tasksToDoCount }}</strong></h6>
                  <!-- Additional stats if needed -->
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<!-- End Counter Cards -->
<!-- Date Picker -->
<form action="{{ path('tache_listdir') }}" method="GET" class="input-group">
   <span class="input-group-text">Date Range:</span>
   <input type="date" class="form-control" id="startDate" name="startDate" value="{{ startDate }}" />
   <span class="input-group-text">to</span>
   <input type="date" class="form-control" id="endDate" name="endDate" value="{{ endDate }}" />
   <button type="submit" class="btn btn-outline-primary">Apply</button>
</form>
<div class="d-flex justify-content-between align-items-center mb-3">
   <div class="btn-group">
      <button id="filterBtn" type="button" class="btn btn-outline-primary filter-btn">
      <i class="bi bi-funnel"></i> Filter
      </button>
      <div id="filterOptions" style="display: block;"> <!-- Show filter options by default -->
         <a href="{{ path('tache_listdir', {'orderBy': 'titre'}) }}" class="btn btn-outline-primary {% if orderBy == 'titre' %}active{% endif %}">Titre</a>
         <a href="{{ path('tache_listdir', {'orderBy': 'etat'}) }}" class="btn btn-outline-primary {% if orderBy == 'etat' %}active{% endif %}">Etat</a>
         <a href="{{ path('tache_listdir') }}" class="btn btn-danger {% if orderBy == 'date_FT' %}active{% endif %}">Clear</a>
      </div>
   </div>
</div>
{% if successMessage %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
   {{ successMessage }}
   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}
<table class="table table-hover">
   <thead>
      <tr class="table-primary">
         <th scope="col">Titre</th>
         <th scope="col">Date Fin</th>
         <th scope="col">Echeance</th>
         <th scope="col">Etat</th>
         <th scope="col">Actions</th>
      </tr>
   </thead>
   <tbody>
      {% for tache in tasks %}
      <tr>
         <td>
            <h6>{{ tache.getTitreT() }}</h6>
         </td>
         <td>
            <h6>{{ tache.getDateFT()|date('d-m-Y') }}</h6>
         </td>
         <td>
            <h6>{{ tache.getEcheance().days }} jours</h6>
         </td>
         <td>
            <h6>{{ tache.getEtatT() }}</h6>
         </td>
         <td>
            <div class="btn-group" role="group" aria-label="Actions">
               <button onclick="location.href='{{ path('tache_detail_front', {'i': tache.getIdT()}) }}'" type="button" class="btn btn-outline-primary"><i class="bi bi-info-circle"></i></button>
               <button onclick="location.href='{{ path('tache_updatedir', {'i': tache.getIdT()}) }}'" type="button" class="btn btn-outline-primary"><i class="bi bi-pencil"></i></button>
               <button onclick="location.href='{{ path('tache_deletedir', {'i': tache.getIdT()}) }}'" type="button" class="btn btn-danger"><i class="bi bi-trash"></i></button>
            </div>
         </td>
      </tr>
      {% endfor %}
   </tbody>
</table>
<!-- pagination2024 -->
<div class="pagination2024">
   {{ knp_pagination_render(tasks) }}
</div>
<div>
<button onclick="location.href='{{ path('tache_adddir') }}'" class="btn btn-outline-primary"><i class="bi bi-plus"></i> Ajouter Tâche</button>
<button onclick="location.href='{{ path('tache_piechartdir') }}'" class="btn btn-outline-primary"><i class="bi bi-star me-1"></i> TOP 10 Meilleurs Employées</button>
</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script>
   function filterByDate() {
       const startDate = document.getElementById('startDate').value;
       const endDate = document.getElementById('endDate').value;
       const url = '{{ path('tache_listdir') }}?startDate=' + startDate + '&endDate=' + endDate;
       window.location.href = url;
   }

   document.addEventListener('DOMContentLoaded', function() {
      // Hide filter options when the page is loaded
      document.getElementById('filterOptions').style.display = 'none';
   });

   document.getElementById('filterBtn').addEventListener('click', function() {
      // Toggle filter options visibility
      const filterOptions = document.getElementById('filterOptions');
      filterOptions.style.display = filterOptions.style.display === 'block' ? 'none' : 'block';
   });
</script>
<style>
   .btn-group {
   display: flex;
   align-items: center;
   }
   #filterOptions {
   margin-left: 10px; /* Adjust the left margin as needed */
   display: none;
   }
</style>
<style>
   /* Pagination container */
   .pagination {
   margin: 0px 25px 25px 0px;
   text-align: center;
   }
   /* Pagination links */
   .pagination a {
   display: inline-block;
   margin: 0 5px;
   padding: 8px 16px;
   border: 1px solid #ddd;
   border-radius: 5px;
   background-color: #fff;
   color: #333;
   text-decoration: none;
   transition: background-color 0.3s;
   }
   /* Active pagination link */
   .pagination a.active {
   background-color: #007bff;
   color: #fff;
   }
   /* Hover state for pagination links */
   .pagination a:hover:not(.active) {
   background-color: #ddd;
   }
   /* Disabled state for previous and next buttons */
   .pagination .disabled {
   pointer-events: none;
   opacity: 0.5;
   }
   /* Responsive pagination */
   @media screen and (max-width: 768px) {
   .pagination {
   margin-top: 10px;
   }
   .pagination a {
   padding: 6px 12px;
   }
   }
   .pagination span.current {
   display: inline-block;
   margin: 0 5px;
   padding: 8px 16px;
   border: 1px solid #007bff;
   border-radius: 5px;
   background-color: #007bff;
   color: #fff;
   text-decoration: none;
   }
   /* Hover state for current page */
   .pagination span.current:hover {
   background-color: #0056b3;
   }
</style>
<style>
   .search-bar {
   margin-top: 20px;
   margin-bottom: 20px;
   }
   .search-form {
   position: relative;
   }
   #search-input {
   width: 100%;
   padding: 10px;
   border: 1px solid #ccc;
   border-radius: 5px;
   font-size: 16px;
   }
   #search-results {
   position: absolute;
   top: 100%;
   left: 0;
   z-index: 1000;
   width: 100%;
   background-color: #fff;
   border: 1px solid #ccc;
   border-top: none;
   border-radius: 0 0 5px 5px;
   box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);
   display: none;
   }
   #search-results a {
   display: block;
   padding: 10px;
   color: #333;
   text-decoration: none;
   transition: background-color 0.3s ease;
   }
   #search-results a:hover {
   background-color: #f5f5f5;
   }
</style>

{% endblock %}
{%block rest%}{% endblock %}
